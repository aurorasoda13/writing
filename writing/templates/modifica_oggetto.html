{% extends 'base.html' %}
{% block title %}Modifica Oggetto{% endblock %}

{% block content %}

<div class="main-layout-container">
    <div class="left-fixed-sidebar">
        <h2>Informazioni Libro</h2>
        <div class="book-detail-content-sidebar">
            <h3>{{ result[1] }}</h3>
            <p><strong>Trama:</strong> {{ result[2] }}</p>
            {% if result[3] %}
                <p><strong>Sinossi:</strong> {{ result[3] }}</p>
            {% endif %}
            <p><strong>Genere:</strong> {{ result[4] }}</p>

            {% if tags %}
                <p><strong>Sottogeneri:</strong></p>
                <div class="book-tags-list">
                    {% for tag_item in tags %}
                        <span class="book-tag"> {{ tag_item[0] }} </span>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>

    <div class="right-main-content-area">
        <h2>Modifica {{ oggetto[1] }}</h2>
        <form action="{{ url_for('editoggetto') }}" method="POST" class="personaggio-form">
            <div class="form-group">
                <label for="nome">Nome</label>
                <input type="text" id="nome" name="nome" value="{{ oggetto[1] }}" required>
            </div>

            <div class="form-group">
                <label for="proprietario">Seleziona il Proprietario dell'Oggetto</label>
                <select name="proprietario" id="proprietario">
                    {% for element in personaggi %}
                        <option value="{{ element[0] }}" {% if element[0] == oggetto[2] %}selected{% endif %}>{{ element[0] }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="descrizione">Descrizione</label>
                <textarea id="descrizione" name="descrizione" rows="10">{{ oggetto[3] }}</textarea>
            </div>

            <div class="form-group">
                <label for="funzione">Funzione</label>
                <textarea id="funzione" name="funzione" rows="10">{{ oggetto[4] }}</textarea>
            </div>

            <div class="form-group">
                <label for="potere">Potere</label>
                <textarea id="potere" name="potere" rows="10">{{ oggetto[5] }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="storia">Storia</label>
                <textarea id="storia" name="storia" rows="10">{{ oggetto[6] }}</textarea>
            </div>

            <div class="form-group">
                <label for="provenienza">Provenienza</label>
                <textarea id="provenienza" name="provenienza" rows="10">{{ oggetto[7] }}</textarea>
            </div>
            
            <input type="hidden" name="book_id" value="{{ book_id }}">
            <input type="hidden" name="oggetto_id" value="{{ oggetto[0] }}">
            
            <button type="submit" class="cta-button">Salva Modifiche</button>
        </form>
    </div>
</div>

{% endblock %}